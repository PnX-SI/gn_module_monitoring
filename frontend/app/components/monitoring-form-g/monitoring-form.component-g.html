<pnx-modal-msg [bDisplayModal]="bDeleteModal" *ngIf="obj && obj.bIsInitialized">
  <h2>Attention</h2>
  <p>
    <!-- TODO: voir pour améliorer le passage d'informations ici -->
    Vous êtes sur le point de supprimer le groupe de site
    <b>Description du groupe de site</b>
  </p>
  <button class="btn btn-danger float-right" (click)="onDelete()">
    <span
      [ngClass]="{ 'hide-spinner': !bDeleteSpinner }"
      class="spinner-border spinner-border-sm"
      role="status"
      aria-hidden="true"
    ></span>
    Confirmer la suppression
  </button>
  <button class="btn btn-primary" (click)="bDeleteModal = false">Annuler</button>
</pnx-modal-msg>

<div>
  <div id="properties-form" class="cadre" *ngIf="!hideForm && obj.bIsInitialized && objFormsDefinition">
    <!-- TODO: voir pour intiialisation si nécessaire à remettre dans la div du dessus -->
    <!-- *ngIf="obj.bIsInitialized && objFormsDefinition" -->

    <!--  TODO: Voir pour l'enchainement des saisies -->
    <span
      *ngIf="!obj.id && obj.config['chained']"
      id="toggle-btn"
      class="float-right"
      matTooltip="Enchainer les saisies"
      matTooltipPosition="left"
    >
      <i class="fa fa-repeat" aria-hidden="true"></i>
      <mat-slide-toggle
        color="primary"
        [(ngModel)]="bChainInput"
        (change)="bChainInputChanged($event)"
      >
      </mat-slide-toggle>
    </span>

    <form [formGroup]="objForm">
      <!-- TODO: Gérer la saisie de géometrie -->
      <p
        class="alert alert-warning"
        style="display:inline-block;"
        *ngIf="obj.config['geometry_type'] && !objForm.value.geometry"
      >
        <span> Veuillez saisir une géométrie sur la carte </span>
      </p>

      <!-- composant choix de site select + filtre -->

      <div id="form-scroll">
        <pnx-dynamic-form-generator
          class="obj-form"
          #dynamicForm
          [autoGenerated]="true"
          [myFormGroup]="objForm"
          [formsDefinition]="objFormsDefinition"
          (myFormGroupChange)="initForm()"
          (change)="onObjFormValueChange($event)"
        ></pnx-dynamic-form-generator>
      </div>
      <!--TODO: add class when text-overflow https://www.taithienbo.com/displaying-text-in-a-tool-tip-when-text-overflows-its-container/ -->
      <div class="btn-child">
        <!-- <button
          *ngIf="!bChainInput && !obj.id && obj.uniqueChildrenName()"
          class="btn btn-success float-right"
          (click)="bSaveAndAddChildrenSpinner = bAddChildren = true; onSubmit()"
          [disabled]="!objForm.valid"
        >
          <span
            [ngClass]="{ 'hide-spinner': !bSaveAndAddChildrenSpinner }"
            class="spinner-border spinner-border-sm float-right"
            role="status"
            aria-hidden="true"
          ></span>

          <span
            >Valider et saisir des {{obj.uniqueChildrenName()}}</span
          >
        </button> -->

        <button
          class="btn btn-success float-right"
          (click)="bSaveSpinner = true; onSubmit()"
          [disabled]="!objForm.valid"
        >
          <span
            [ngClass]="{ 'hide-spinner': !bSaveSpinner }"
            class="spinner-border spinner-border-sm float-right"
            role="status"
            aria-hidden="true"
          ></span>

          <span *ngIf="bChainInput && !obj.id"
            >Valider et enchainer les saisies</span
          > 
           <span *ngIf="!bChainInput || obj.id">Valider</span>
        </button>

          <!-- <span>Valider</span>
        </button> -->

        <button class="btn btn-primary float-left" (click)="onCancelEdit()">Annuler</button>
        <button class="btn btn-danger float-left" (click)="bDeleteModal = true" *ngIf="obj.id">
          Supprimer
        </button>
      </div>
      <div class="btn-height"></div>
    </form>
  </div>
</div>
