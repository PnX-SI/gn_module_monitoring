<div>
  <div id="properties-form" class="cadre" *ngIf="formsDefinition">
    <div style="height: 25px;">
      <span
        *ngIf="!object && config['chained']"
        id="toggle-btn"
        class="float-right"
        matTooltip="Enchainer les saisies"
        matTooltipPosition="left"
      >
        <i class="fa fa-repeat" aria-hidden="true"></i>
        <mat-slide-toggle
          color="primary"
          [(ngModel)]="chainInput"
          (change)="chainInputChanged($event)"
        >
        </mat-slide-toggle>
      </span>
    </div>
    <form [formGroup]="form">
      <p
        class="alert alert-warning"
        style="display: inline-block"
        *ngIf="
          config['geometry_type'] && !form.value.geometry && objectType != 'sites_group'
        "
      >
        <span>{{ 'Monitoring.Form.PickGeom' | translate }}</span>
      </p>
      <p
        class="alert alert-warning"
        style="display: inline-block; padding: 4px"
        *ngIf="
          config['geometry_type'] &&
          !form.value.geometry &&
          objectType == 'sites_group'
        "
      >
        <span>
          {{ 'Monitoring.Form.GrpSiteGeom' | translate }}
        </span>
      </p>

      <!-- composant choix de site select + filtre -->
      <div
        [ngClass]="{
          'form-scroll-info-geom': config['geometry_type'] && !form.value.geometry,
          'form-scroll': !(config['geometry_type'] && !form.value.geometry)
        }"
      >
        <pnx-dynamic-form-generator
          class="obj-form"
          #dynamicForm
          [autoGenerated]="true"
          [myFormGroup]="form"
          [formsDefinition]="formsDefinition"
          (myFormGroupChange)="initForm()"
          (change)="onFormValueChange($event)"
        ></pnx-dynamic-form-generator>
      </div>
      <div class="btn-child">
        <button
          mat-raised-button
          color="primary"
          *ngIf="!chainInput && !object && config.children && addChildren"
          class="btn btn-success float-right mr-1"
          (click)="canUpdate ? onSubmit(true) : notAllowedMessage()"
          [disabled]="!form.valid"
        >
          <span
            [ngClass]="{ 'hide-spinner': !saveAndAddChildrenSpinner }"
            class="spinner-border spinner-border-sm float-right"
            role="status"
            aria-hidden="true"
          ></span>
          
          <span>{{ 'Monitoring.Form.ValidateEnter' | translate }}{{ config.children[0] }}</span>
        </button>
        <button
          mat-raised-button
          color="primary"
          class="float-right mr-1"
          (click)="canUpdate ? onSubmit() : notAllowedMessage()"
          [disabled]="!form.valid"
          >
          <span
            [ngClass]="{ 'hide-spinner': !saveSpinner }"
            class="spinner-border spinner-border-sm float-right"
            role="status"
            aria-hidden="true"
          ></span>
          
          <span *ngIf="chainInput && !object">{{ 'Monitoring.Form.ValidateChain' | translate }}</span>
          <span *ngIf="!chainInput || object">{{ 'Monitoring.Form.Validate' | translate }}</span>
        </button>
    
        <button mat-raised-button color="warn" class="float-left" (click)="onCancelEdit()">
          {{ 'Monitoring.Form.Cancel' | translate }}
        </button>
        <button
          mat-raised-button
          [matTooltip]="canDelete ? null : toolTipNotAllowed"
          [disabled]="!canDelete"
          color="warn"
          class="float-left"
          (click)="canDelete ? (bDeleteModal = true) : null"
          *ngIf="object"
        >
          {{ 'Monitoring.Form.Delete' | translate }}
        </button>
      </div>
    </form>
  </div>
</div>