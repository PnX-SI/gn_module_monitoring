<div>
    <form [formGroup]="form">
      <p
        class="alert alert-warning"
        style="display: inline-block"
        *ngIf="
          config['geometry_type'] && !form.value.geometry && obj.objectType != 'sites_group'
        "
      >
        <span> Veuillez saisir une géométrie sur la carte </span>
      </p>
      <p
        class="alert alert-warning"
        style="display: inline-block; padding: 4px"
        *ngIf="
          config['geometry_type'] &&
          !form.value.geometry &&
          obj.objectType == 'sites_group' &&
          obj.properties.geometry == null
        "
      >
        <span>
          La géométrie de groupe site est actuellement auto-générée sur la base des sites enfants
          (si existants). Vous avez la possibilité de créer vous même une géométrie
        </span>
      </p>

      <!-- composant choix de site select + filtre -->
      <div
        [ngClass]="{
          'form-scroll-info-geom': config['geometry_type'] && !form.value.geometry,
          'form-scroll': !(config['geometry_type'] && !form.value.geometry)
        }"
      >
        <pnx-dynamic-form-generator
          class="obj-form"
          #dynamicForm
          [autoGenerated]="true"
          [myFormGroup]="form"
          [formsDefinition]="objFormsDefinition"
          (myFormGroupChange)="initForm()"
          (change)="onObjFormValueChange($event)"
        ></pnx-dynamic-form-generator>
      </div>
      <div class="btn-child">
        <button
        mat-raised-button
        color="primary"
        *ngIf="!chainInput && !obj.id && obj.uniqueChildrenName && addChildren"
        class="btn btn-success float-right mr-1"
        (click)="canUpdate ? onSubmit(true) : notAllowedMessage()"
        [disabled]="!form.valid"
        >
        <span
        [ngClass]="{ 'hide-spinner': !saveAndAddChildrenSpinner }"
        class="spinner-border spinner-border-sm float-right"
        role="status"
        aria-hidden="true"
        ></span>
        
        <span>Valider et saisir des {{ obj.uniqueChildrenName }}</span>
      </button>
      
      <button
      mat-raised-button
      color="primary"
      class="float-right mr-1"
      (click)="canUpdate ? onSubmit() : notAllowedMessage()"
      [disabled]="!form.valid"
      >
      <span
      [ngClass]="{ 'hide-spinner': !saveSpinner }"
      class="spinner-border spinner-border-sm float-right"
      role="status"
      aria-hidden="true"
      ></span>
      
      <span *ngIf="chainInput && !obj.id">Valider et enchainer les saisies</span>
      <span *ngIf="!chainInput || obj.id">Valider</span>
    </button>
    
    <button mat-raised-button color="warn" class="float-left" (click)="onCancelEdit()">
      Annuler
    </button>
    <button
    mat-raised-button
    [matTooltip]="canDelete ? null : toolTipNotAllowed"
          [disabled]="!canDelete"
          color="warn"
          class="float-left"
          (click)="canDelete ? (bDeleteModal = true) : null"
          *ngIf="obj.id"
        >
          Supprimer
        </button>
    </div>
  </form>
</div>